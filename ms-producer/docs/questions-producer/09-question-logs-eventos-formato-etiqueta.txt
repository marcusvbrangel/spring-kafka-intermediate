
  üìä Resumo dos Logs em Formato de Etiqueta

  Implementei logs visuais bonitos nos dois microservi√ßos:

  ms-producer üì§

  1. OutboxService - Quando evento √© salvo no outbox:

  =================================================================
                     üíæ OUTBOX EVENT SAVED
  =================================================================
    Outbox ID:       cc39c528-fae5-43ff-ad13-53844b71fe2c
    Aggregate Type:  PAYMENT
    Aggregate ID:    pgto-12
    Event Type:      PAYMENT_APPROVED
    Topic:           payment.approved.v1
    Partition Key:   user-84
    Status:          PENDING
    Created At:      2025-12-07T23:18:28.538Z
  =================================================================

  2. OutboxPublisher - Quando vai publicar no Kafka:

  =================================================================
                    üì§ OUTBOX ‚Üí KAFKA PUBLISHER
  =================================================================
    Outbox ID (Tabela):  cc39c528-fae5-43ff-ad13-53844b71fe2c
    Event ID (Dom√≠nio):  bad5230c-6db5-4027-852e-6938e560630f
    Event Type:          PAYMENT_APPROVED
    Aggregate ID:        pgto-12
    Topic:               payment.approved.v1
    Partition Key:       user-84
  =================================================================

  3. OutboxPublisher - Quando publica√ß√£o √© bem-sucedida:

  =================================================================
                    ‚úÖ KAFKA PUBLISH SUCCESSFUL
  =================================================================
    Outbox ID:       cc39c528-fae5-43ff-ad13-53844b71fe2c
    Event ID:        bad5230c-6db5-4027-852e-6938e560630f
    Topic:           payment.approved.v1
    Partition:       1
    Offset:          4
    Timestamp:       1765160310833
  =================================================================

  4. OutboxPublisher - Se houver erro:

  =================================================================
                      ‚ùå KAFKA PUBLISH FAILED
  =================================================================
    Outbox ID:     cc39c528-fae5-43ff-ad13-53844b71fe2c
    Event ID:      bad5230c-6db5-4027-852e-6938e560630f
    Error:         Connection refused
  =================================================================

  ---
  ms-consumer üì®

  1. PaymentApprovedConsumer - Quando recebe do Kafka:

  =================================================================
                 üì® KAFKA ‚Üí CONSUMER RECEIVED
  =================================================================
    Event ID:      bad5230c-6db5-4027-852e-6938e560630f
    Payment ID:    pgto-12
    User ID:       user-84
    Amount:        57.52
    Currency:      BRL
    Status:        APPROVED
    Timestamp:     1765160308538
    Partition:     1
    Offset:        4
  =================================================================

  2. PaymentApprovedConsumer - Se detectar duplicata (idempot√™ncia):

  =================================================================
                    ‚ö†Ô∏è  DUPLICATE EVENT DETECTED
  =================================================================
    Event ID:      bad5230c-6db5-4027-852e-6938e560630f
    Payment ID:    pgto-12
    User ID:       user-84
    Action:        SKIPPING (already processed)
    Partition:     1
    Offset:        4
  =================================================================

  3. PaymentApprovedConsumer - Quando processamento √© bem-sucedido:

  =================================================================
                ‚úÖ EVENT PROCESSED SUCCESSFULLY
  =================================================================
    Event ID:        bad5230c-6db5-4027-852e-6938e560630f
    Payment ID:      pgto-12
    User ID:         user-84
    Amount:          57.52
    Topic:           payment.approved.v1
    Partition:       1
    Offset:          4
    Status:          COMMITTED
  =================================================================

  4. PaymentApprovedConsumer - Se houver erro de desserializa√ß√£o:

  =================================================================
                    ‚ùå DESERIALIZATION ERROR
  =================================================================
    Partition:  1
    Offset:     4
    Error:      Received null event
    Action:     Message will be retried or sent to DLQ
  =================================================================

  ---
  üéØ Benef√≠cios dos Logs em Etiqueta:

  1. Rastreabilidade Visual: F√°cil de identificar visualmente no console
  2. IDs Claros: Diferencia claramente Outbox ID (tabela) vs Event ID (dom√≠nio)
  3. Fluxo Completo: Acompanha a jornada do evento do in√≠cio ao fim
  4. Debugging R√°pido: Identifica problemas rapidamente
  5. Produ√ß√£o Ready: Logs estruturados para ferramentas de log aggregation

  Agora voc√™ pode rastrear perfeitamente toda a jornada de um evento:
  üíæ OUTBOX EVENT SAVED ‚Üí üì§ OUTBOX ‚Üí KAFKA PUBLISHER ‚Üí ‚úÖ KAFKA PUBLISH SUCCESSFUL
                                                                ‚Üì
  üì® KAFKA ‚Üí CONSUMER RECEIVED ‚Üí ‚úÖ EVENT PROCESSED SUCCESSFULLY

  Os logs est√£o prontos para teste! üöÄ
